@chapter ffprobe demuxer format
@c man begin FFPROBE DEMUXER FORMAT

The ffprobe demuxer format is inspired by the output generated by the
ffprobe default format.

It consists of several sections (FORMAT, STREAM, PACKET). Each section
starts with a single line in the format @samp{[SECTION]} and ends with
the corresponding line @samp{[/SECTION]}.

where @samp{SECTION} is the name of the section.

A well-formed file consists of an initial @samp{FORMAT} section,
followed by several @samp{STREAM} sections (one per stream), and
several @samp{PACKET} sections.

Each section contains a sequence of lines in the form
@sample{key=value}. In the case of data the key and the value must
stay on different lines.

Unrecognized values are discarded (this allows the demuxer to accept
the output generated by @program{ffprobe} without further
modifications.

The following sections document the fields accepted by each section.

@section FORMAT

@table
@item nb_streams
the number of supported streams
@end table

@section STREAM
@table
@item index
the index number
@item codec_name
the codec name (the name must be an accepted FFmpeg codec name
@item time_base
Specify the time_base as @samp{NUM/DEN}, this is the time base used to
specify the timestamps in the corresponding packets
@end table

@section PACKET

@table
@item stream_index
the stream index of the stream (must have been specified in a stream
section). If not specified the first stream is assumed.

@item pts
the PTS expressed in the corresponding time base stream units

@item pts_time
the PTS expressed as an absolute time, using the FFmpeg time syntax

@item dts
the DTS expressed in the corresponding time base stream units

@item pts_time
the DTS expressed as an absolute time, using the FFmpeg time syntax

@item duration
the duration expressed in the corresponding time base stream units

@item duration_tim
the packet duration expressed as an absolute time, using the FFmpeg time syntax

@item flags
If the value is equal to "K" mark the packet as a key packet

@item data
specifies the data as a sequence of hexadecimal values (two
hexadecimal values specify a byte). The data specification starts on
the following line and can span over several lines, and must be
terminated by an empty line. Spaces within each line are discarded.
@end table

@section Examples

A ffprobe demuxer file might look like this:
@example
[FORMAT]
nb_streams=1
format_name=ffprobe_default
[/FORMAT]
[STREAM]
index=0
codec_name=timed_id3
time_base=1/1000000
[/STREAM]
[PACKET]
stream_index=0
pts_time=0
dts_time=0
duration=N/A
flags=K
data=
f000 0000 0167 42c0 1ed9 81b1 fefc 0440
57ff d7d1 dfff e11a 3d7e 6cbd 0000 0001
ce8c 4d9d 108e 25e9 fe

[/PACKET]
[PACKET]
stream_index=0
pts_time=1.00
duration=N/A
flags=K
data=
f000 0000 0141 9a38 3be5 ffff ffff fffa
ebc1 3782 7d5e 21e9 ffff abf2 ea4f ed66
0000 0001 ce8c 4d9d 108e 25e9 fe

[/PACKET]
@end example

The output generated by the @program{ffprobe} default format is valid
if the following options are also specified:
@example
-show_packets -show_data -show_compact_data -show_format -show_streams -show_packets -show_headers_first
@end example

Thus, to generate the corresponding output from an input file you can
do:
@example
ffprobe INPUT.ts -show_packets -show_data -show_compact_data -show_format -show_streams -show_packets -show_headers_first > OUTPUT.ffprobe
@end example

@c man end FFPROBE DEMUXER FORMAT
